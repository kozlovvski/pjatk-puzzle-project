var v=Object.defineProperty;var f=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var m=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,i=(e,t)=>{for(var r in t||(t={}))k.call(t,r)&&m(e,r,t[r]);if(f)for(var r of f(t))w.call(t,r)&&m(e,r,t[r]);return e};import{q as g,s as A,a as L,b as S,l as b,m as I,c as N,x as _,y as q,d as T}from"./vendor.548618a6.js";const D=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}};D();const M=e=>{e.classList.add("is-active")},y=e=>{e.classList.remove("is-active")},O=()=>{(document.querySelectorAll(".modal")||[]).forEach(e=>{y(e)})};(document.querySelectorAll(".modal-trigger")||[]).forEach(e=>{const t=e.dataset.target;if(!t)throw Error(`No target modal id for ${e}`);const r=document.getElementById(t);e.addEventListener("click",()=>{r!==null&&M(r)})});(document.querySelectorAll(".modal-background, .modal-close, .modal-card-head .delete, .modal-close-button")||[]).forEach(e=>{const t=e.closest(".modal");e.addEventListener("click",()=>{t!==null&&y(t)})});document.addEventListener("keydown",e=>{(e||window.event).keyCode===27&&O()});const d=document.querySelector("#settings__form"),$=document.querySelector(".generate__button");d.addEventListener("submit",e=>{e.preventDefault(),e.stopPropagation();const t=Object.fromEntries(new FormData(d)),r=g.stringifyUrl({url:window.location.origin,query:t});window.location.href=r});const U={nodesNumber:"50"},V=g.parseUrl(window.location.href).query,p=i(i({},U),V);Object.entries(p).forEach(([e,t])=>{const r=d.querySelector(`[name="${e}"]`);if(!r)throw Error(`No input for name: ${e}`);r.value=t});$.addEventListener("click",()=>{window.location.reload()});const B=1400,C=1080,s=A(".canvas__element"),c=new Array(+p.nodesNumber).fill(0).map((e,t)=>({index:t})),u=c.map(({index:e})=>({index:e,source:e,target:L(c.filter(t=>t.index!==e)).index})),E=S(c).velocityDecay(.3).force("link",b(u).id(e=>e.index).strength(1).distance(30).iterations(2)).force("charge",I().strength(-150)).force("center",N(B/2,C/2).strength(1)).force("x",_()).force("y",q()).force("tick",K);s.append("defs").append("marker").attr("id","link-arrow").attr("viewBox","-5 -5 10 10").attr("markerWidth",4).attr("markerHeight",4).attr("refX",12).attr("refY",0).attr("orient","auto").append("path").attr("d","M 0,0 m -5,-5 L 5,0 L -5,5 Z");const G=s.append("g").attr("class","links").selectAll("line").data(u).enter().append("line").attr("data-from",e=>String(e.index)).attr("stroke-width",3),H=e=>{var t;return(t=u.find(r=>r.source.index==e))==null?void 0:t.target.index},h=e=>{const t=H(e);return s.select(`circle[data-index="${t}"]`).node()},x=e=>s.select(`line[data-from="${e}"]`).node(),j=(e,t)=>{e.active||E.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y},F=(e,t)=>{t.fx=e.x,t.fy=e.y},P=(e,t)=>{e.active||E.alphaTarget(0),t.fx=null,t.fy=null},W=s.append("g").attr("class","nodes").selectAll("circle").data(c).enter().append("circle").attr("data-index",e=>e.index).on("mouseover",function(e){const t=e.target,r=Number(t.dataset.index),a=h(r),o=x(r);t.style.fill="blue",a.style.fill="green",o==null||o.setAttribute("marker-end","url(#link-arrow)")}).on("mouseout",function(e){const t=e.target,r=Number(t.dataset.index),a=h(r),o=x(r);t.style.fill="red",a.style.fill="red",o==null||o.removeAttribute("marker-end")}).attr("r",5).attr("fill","red").call(T().on("start",j).on("drag",F).on("end",P));function K(){G.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),W.attr("cx",e=>e.x).attr("cy",e=>e.y)}
